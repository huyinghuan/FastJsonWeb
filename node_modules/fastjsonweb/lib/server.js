var http = require('http');
var filter = require('./doFilter');
var UnrealThread = require("./UnrealThread");
function onRequest(request,response){
	filter.doFilter(request,response);
}

exports.createServer = {
	listen:function(port){
		http.createServer(onRequest).listen(port);
		console.log("Server is running");
		var thread = new UnrealThread(require("./session_timeout").timeout,5000);
		thread.start();
	}
}
